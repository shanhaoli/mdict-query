<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>{{title}}/{{entry}}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='../static/style.css') }}">
</head>
<body>
    <div class="search-bar">
        <form onsubmit="redirect()">
          <input type="text" id="search" name="search" placeholder="{{entry}}">
          <button type="submit">Search</button>
        </form>
     </div>
    <br>
    <div class="content-wrapper">
        {{content|safe}}
    </div>
    <script>
        //play sound
        player = document.createElement("audio")
        player.id = 'player'

        function redirect() {
            event.preventDefault();
            const searchTerm = document.getElementById("search").value;
            window.location.href = `http://127.0.0.1:5000/dict/%E6%9F%AF%E6%9E%97%E6%96%AF%E5%8F%8C%E8%A7%A3/${searchTerm}`;
        }

        function play(url) {
            console.log(url)
            //var url = sound.href.replace("sound://", "")
            //var audio = document.createElement("audio")
            //player.pause()
            player.src = url
            player.play()
        }

        function makefunction(url)
        {
            return function (e) {
                play(url)
				e.preventDefault()
            }
        }
        var all_a = document.getElementsByTagName('a')
        for (i in all_a) {
            var item = all_a[i]
            if (item.href && item.href.lastIndexOf("sound://", 0) === 0) {
                var url = item.href.replace("sound://", "")
                var func = makefunction(url)
                item.addEventListener("click",
                    func
                )
            }

            if (item.href && item.href.lastIndexOf("entry://", 0) === 0) {
                item.href = item.href.replace("entry://", "")
            }
        }
    </script>
</body>

</html>