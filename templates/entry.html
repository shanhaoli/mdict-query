<html>
<head>
    <meta charset="UTF-8">
    <title>Content</title>
{#    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css">#}
    <link rel="stylesheet" href="{{ url_for('static', filename='./style.css') }}">
</head>
<body>
    <nav class="search-bar">
        <a href="/dict/" class="">Home</a>
        <form onsubmit="redirect()">
          <input type="text" id="search" name="search" placeholder="{{entry}}">
          <button type="submit">Search</button>
        </form>
    </nav>

    <br>

    <div class="content-wrapper">
        {{content|safe}}
    </div>

    <script>
        function redirect() {
            event.preventDefault();
            const searchTerm = document.getElementById("search").value;
            const baseUrl = window.location.origin;
            const path = window.location.pathname;
            var dictName = path.split('/')[2];
            window.location.href = `${baseUrl}/dict/${dictName}/${searchTerm}`;
        }

        //play sound
        player = document.createElement("audio")
        player.id = 'player'

        function play(url) {
            console.log(url)
            //var url = sound.href.replace("sound://", "")
            //var audio = document.createElement("audio")
            //player.pause()
            player.src = url
            player.play()
        }

        function makefunction(url)
        {
            return function (e) {
                play(url)
				e.preventDefault()
            }
        }
        var all_a = document.getElementsByTagName('a')
        for (i in all_a) {
            var item = all_a[i]
            if (item.href && item.href.lastIndexOf("sound://", 0) === 0) {
                var url = item.href.replace("sound://", "")
                var func = makefunction(url)
                item.addEventListener("click",
                    func
                )
            }

            if (item.href && item.href.lastIndexOf("entry://", 0) === 0) {
                item.href = item.href.replace("entry://", "")
            }
        }
    </script>
</body>

</html>